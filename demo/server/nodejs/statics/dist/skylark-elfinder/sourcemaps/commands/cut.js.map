{"version":3,"sources":["commands/cut.js"],"names":["define","elFinder","prototype","commands","cut","fm","this","shortcuts","pattern","getstate","select","sel","files","cnt","length","$","grep","f","read","locked","isRoot","exec","hashes","dfrd","Deferred","fail","error","each","i","file","reject","name","state","resolve","clipboard"],"mappings":";;;;;;;AAAAA,QACC,eACC,SAASC,GAoCV,OAnCAA,EAASC,UAAUC,SAASC,IAAM,WACjC,aACA,IAAIC,EAAKC,KAAKD,GAEdC,KAAKC,YACJC,QAAc,wBAGfF,KAAKG,SAAW,SAASC,GACxB,IAAIC,EAAML,KAAKM,MAAMF,GACpBG,EAAMF,EAAIG,OAEX,OAAOD,GAAOE,EAAEC,KAAKL,EAAK,SAASM,GAAK,SAAOA,EAAEC,MAAUD,EAAEE,QAAYd,EAAGe,OAAOH,MAAsBH,QAAUD,EAAM,GAAK,GAG/HP,KAAKe,KAAO,SAASC,GACpB,IAAIC,EAAOR,EAAES,WACVC,KAAK,SAASC,GACdrB,EAAGqB,MAAMA,KAYZ,OATAX,EAAEY,KAAKrB,KAAKM,MAAMU,GAAS,SAASM,EAAGC,GACtC,OAAMA,EAAKX,MAAUW,EAAKV,QAAYd,EAAGe,OAAOS,IACvCN,EAAKO,QAAQ,UAAWD,EAAKE,KAAM,YAExCF,EAAKV,QACAI,EAAKO,QAAQ,YAAaD,EAAKE,YADxC,IAKsB,YAAhBR,EAAKS,QAAwBT,EAAOA,EAAKU,QAAQ5B,EAAG6B,UAAU5B,KAAKgB,OAAOA,IAAS,MAKrFrB","file":"../../commands/cut.js","sourcesContent":["define([\n\t\"../elFinder\"\n],function(elFinder){\n\telFinder.prototype.commands.cut = function() {\n\t\t\"use strict\";\n\t\tvar fm = this.fm;\n\t\t\n\t\tthis.shortcuts = [{\n\t\t\tpattern     : 'ctrl+x shift+insert'\n\t\t}];\n\t\t\n\t\tthis.getstate = function(select) {\n\t\t\tvar sel = this.files(select),\n\t\t\t\tcnt = sel.length;\n\t\t\t\n\t\t\treturn cnt && $.grep(sel, function(f) { return f.read && ! f.locked && ! fm.isRoot(f) ? true : false; }).length == cnt ? 0 : -1;\n\t\t};\n\t\t\n\t\tthis.exec = function(hashes) {\n\t\t\tvar dfrd = $.Deferred()\n\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\tfm.error(error);\n\t\t\t\t\t});\n\n\t\t\t$.each(this.files(hashes), function(i, file) {\n\t\t\t\tif (!(file.read && ! file.locked && ! fm.isRoot(file)) ) {\n\t\t\t\t\treturn !dfrd.reject(['errCopy', file.name, 'errPerm']);\n\t\t\t\t}\n\t\t\t\tif (file.locked) {\n\t\t\t\t\treturn !dfrd.reject(['errLocked', file.name]);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\treturn dfrd.state() == 'rejected' ? dfrd : dfrd.resolve(fm.clipboard(this.hashes(hashes), true));\n\t\t};\n\n\t};\n\n\treturn elFinder;\n\n});"]}