{"version":3,"sources":["extras/quicklook.googledocs.js"],"names":["define","elFinder","prototype","commands","quicklook","plugins","push","ql","fm","preview","on","e","window","node","loading","file","mime","indexOf","url","hide","$","i18n","appendTo","info","find","this","html","request","data","cmd","target","hash","preventDefault","always","show","done","rfile","value","trigger","Event","stopImmediatePropagation","css","hideinfo","remove","attr","one","off"],"mappings":";;;;;;;AAAAA,QACC,cACA,yBACC,SAASC,GACV,aACA,IACOA,EAASC,UAAUC,SAASC,UAAUC,UAC3CJ,EAASC,UAAUC,SAASC,UAAUC,YAEvCJ,EAASC,UAAUC,SAASC,UAAUC,QAAQC,KAAK,SAASC,GAC3D,IAAIC,EAAUD,EAAGC,GAChBC,EAAUF,EAAGE,QAEdA,EAAQC,GAAG,SAAU,SAASC,GAClBJ,EAAGK,OAAd,IACgBC,EAAMC,EAArBC,EAAOJ,EAAEI,KAEgD,IAAtDA,EAAKC,KAAKC,QAAQ,kCACL,KAAZF,EAAKG,MACRT,EAAQU,OACRC,EAAE,kFAAkFZ,EAAGa,KAAK,WAAW,mBAAmBC,SAASf,EAAGgB,KAAKC,KAAK,6BAC/Id,GAAG,QAAS,WACZU,EAAEK,MAAMC,KAAK,mCACblB,EAAGmB,SACFC,MAAQC,IAAM,MAAOC,OAASf,EAAKgB,MACnCC,gBAAiB,IAEjBC,OAAO,WACPxB,EAAQyB,OACRd,EAAEK,MAAMC,KAAK,MAEbS,KAAK,SAASP,GACd,IAAIQ,EAAQ5B,EAAGO,KAAKA,EAAKgB,MACzBxB,EAAG8B,MAAMnB,IAAMkB,EAAMlB,IAAMU,EAAKV,KAAO,GACnCX,EAAG8B,MAAMnB,KACZT,EAAQ6B,QAAQlB,EAAEmB,MAAM,UAAWxB,KAAOR,EAAG8B,cAKhC,KAAbtB,EAAKG,KAA0B,KAAZH,EAAKG,MAC3BP,EAAE6B,2BAEF1B,EAAUM,EAAE,iFAAiFZ,EAAGa,KAAK,cAAc,iDAAiDC,SAASf,EAAGgB,KAAKC,KAAK,6BAE1LX,EAAOO,EAAE,uDACPqB,IAAI,mBAAoB,eACxB/B,GAAG,OAAQ,WACXH,EAAGmC,WACH5B,EAAQ6B,SACR9B,EAAK4B,IAAI,mBAAoB,UAE7B/B,GAAG,QAAS,WACZI,EAAQ6B,SACR9B,EAAK8B,WAELrB,SAASb,GACTmC,KAAK,MAAOpC,EAAGU,IAAIH,EAAKgB,OAE1BtB,EAAQoC,IAAI,SAAU,WACrB/B,EAAQ6B,SACR9B,EAAKiC,IAAI,QAAQH,iBAOrB,MAAMhC,IAGR,OAAOV","file":"../../extras/quicklook.googledocs.js","sourcesContent":["define([\n\t\"../elFinder\",\n\t\"../commands/quicklook\"\n],function(elFinder){\n\t\"use strict\";\n\ttry {\n\t\tif (! elFinder.prototype.commands.quicklook.plugins) {\n\t\t\telFinder.prototype.commands.quicklook.plugins = [];\n\t\t}\n\t\telFinder.prototype.commands.quicklook.plugins.push(function(ql) {\n\t\t\tvar fm      = ql.fm,\n\t\t\t\tpreview = ql.preview;\n\t\t\t\t\n\t\t\tpreview.on('update', function(e) {\n\t\t\t\tvar win  = ql.window,\n\t\t\t\t\tfile = e.file, node, loading;\n\t\t\t\t\n\t\t\t\tif (file.mime.indexOf('application/vnd.google-apps.') === 0) {\n\t\t\t\t\tif (file.url == '1') {\n\t\t\t\t\t\tpreview.hide();\n\t\t\t\t\t\t$('<div class=\"elfinder-quicklook-info-data\"><button class=\"elfinder-info-button\">'+fm.i18n('getLink')+'</button></div>').appendTo(ql.info.find('.elfinder-quicklook-info'))\n\t\t\t\t\t\t.on('click', function() {\n\t\t\t\t\t\t\t$(this).html('<span class=\"elfinder-spinner\">');\n\t\t\t\t\t\t\tfm.request({\n\t\t\t\t\t\t\t\tdata : {cmd : 'url', target : file.hash},\n\t\t\t\t\t\t\t\tpreventDefault : true\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.always(function() {\n\t\t\t\t\t\t\t\tpreview.show();\n\t\t\t\t\t\t\t\t$(this).html('');\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\t\tvar rfile = fm.file(file.hash);\n\t\t\t\t\t\t\t\tql.value.url = rfile.url = data.url || '';\n\t\t\t\t\t\t\t\tif (ql.value.url) {\n\t\t\t\t\t\t\t\t\tpreview.trigger($.Event('update', {file : ql.value}));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (file.url !== '' && file.url != '1') {\n\t\t\t\t\t\te.stopImmediatePropagation();\n\n\t\t\t\t\t\tloading = $('<div class=\"elfinder-quicklook-info-data\"><span class=\"elfinder-spinner-text\">'+fm.i18n('nowLoading')+'</span><span class=\"elfinder-spinner\"/></div>').appendTo(ql.info.find('.elfinder-quicklook-info'));\n\n\t\t\t\t\t\tnode = $('<iframe class=\"elfinder-quicklook-preview-iframe\"/>')\n\t\t\t\t\t\t\t.css('background-color', 'transparent')\n\t\t\t\t\t\t\t.on('load', function() {\n\t\t\t\t\t\t\t\tql.hideinfo();\n\t\t\t\t\t\t\t\tloading.remove();\n\t\t\t\t\t\t\t\tnode.css('background-color', '#fff');\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.on('error', function() {\n\t\t\t\t\t\t\t\tloading.remove();\n\t\t\t\t\t\t\t\tnode.remove();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.appendTo(preview)\n\t\t\t\t\t\t\t.attr('src', fm.url(file.hash));\n\n\t\t\t\t\t\tpreview.one('change', function() {\n\t\t\t\t\t\t\tloading.remove();\n\t\t\t\t\t\t\tnode.off('load').remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t});\n\t\t});\n\t} catch(e) {}\n\n\n\treturn elFinder;\n});\n"]}