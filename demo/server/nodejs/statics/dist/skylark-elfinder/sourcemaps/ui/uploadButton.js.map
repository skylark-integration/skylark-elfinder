{"version":3,"sources":["ui/uploadButton.js"],"names":["define","$","fn","elfinderuploadbutton","cmd","this","each","tm","fm","button","elfinderbutton","off","form","appendTo","input","i18n","on","_input","val","exec","remove","cwd","hash","clone","e","originalEvent","dataTransfer","dropEffect","append","change","cancelAnimationFrame","requestAnimationFrame","toShow","disabled","is","hide","show"],"mappings":";;;;;;;AAAAA,QACC,kBACC,SAASC,GAMVA,EAAEC,GAAGC,qBAAuB,SAASC,GACpC,aACA,OAAOC,KAAKC,KAAK,WAChB,IAeCC,EAfGC,EAAKJ,EAAII,GACZC,EAASR,EAAEI,MAAMK,eAAeN,GAC9BO,IAAI,SACNC,EAAOX,EAAE,WAAWY,SAASJ,GAC7BK,EAAQb,EAAE,6CAA6CG,EAAII,GAAGO,KAAK,mBAAmB,OACpFC,GAAG,SAAU,WACb,IAAIC,EAAShB,EAAEI,MACXY,EAAOC,QACVV,EAAGW,KAAK,UAAWL,MAAQG,EAAOG,SAAS,SAAK,EAASZ,EAAGa,MAAMC,MAClER,EAAMS,OAAM,GAAMV,SAASD,MAG5BI,GAAG,WAAY,SAASQ,GACxBA,EAAEC,cAAcC,aAAaC,WAAa,SAI7Cf,EAAKgB,OAAOd,EAAMS,OAAM,IAExBnB,EAAIyB,OAAO,WACVtB,GAAMuB,qBAAqBvB,GAC3BA,EAAKwB,sBAAsB,WAC1B,IAAIC,EAAS5B,EAAI6B,WACbrB,EAAKsB,GAAG,YACVF,GAAUpB,EAAKuB,OAEhBH,GAAUpB,EAAKwB,WAIjBP","file":"../../ui/uploadButton.js","sourcesContent":["define([\n\t\"skylark-jquery\"\n],function($) {\n\t/**\n\t * @class  elFinder toolbar's button tor upload file\n\t *\n\t * @author Dmitry (dio) Levashov\n\t **/\n\t$.fn.elfinderuploadbutton = function(cmd) {\n\t\t\"use strict\";\n\t\treturn this.each(function() {\n\t\t\tvar fm = cmd.fm,\n\t\t\t\tbutton = $(this).elfinderbutton(cmd)\n\t\t\t\t\t.off('click'), \n\t\t\t\tform = $('<form/>').appendTo(button),\n\t\t\t\tinput = $('<input type=\"file\" multiple=\"true\" title=\"'+cmd.fm.i18n('selectForUpload')+'\"/>')\n\t\t\t\t\t.on('change', function() {\n\t\t\t\t\t\tvar _input = $(this);\n\t\t\t\t\t\tif (_input.val()) {\n\t\t\t\t\t\t\tfm.exec('upload', {input : _input.remove()[0]}, void(0), fm.cwd().hash);\n\t\t\t\t\t\t\tinput.clone(true).appendTo(form);\n\t\t\t\t\t\t} \n\t\t\t\t\t})\n\t\t\t\t\t.on('dragover', function(e) {\n\t\t\t\t\t\te.originalEvent.dataTransfer.dropEffect = 'copy';\n\t\t\t\t\t}),\n\t\t\t\ttm;\n\n\t\t\tform.append(input.clone(true));\n\t\t\t\t\t\n\t\t\tcmd.change(function() {\n\t\t\t\ttm && cancelAnimationFrame(tm);\n\t\t\t\ttm = requestAnimationFrame(function() {\n\t\t\t\t\tvar toShow = cmd.disabled();\n\t\t\t\t\tif (form.is('visible')) {\n\t\t\t\t\t\t!toShow && form.hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoShow && form.show();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t\t.change();\n\t\t});\n\t};\n\n});"]}