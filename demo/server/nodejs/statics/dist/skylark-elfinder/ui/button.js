/**
 * skylark-elfinder - A version of elfinder that ported to running on skylarkjs.
 * @author 
 * @version v0.9.0
 * @link 
 * @license MIT
 */
define(["skylark-jquery"],function(e){e.fn.elfinderbutton=function(t){"use strict";return this.each(function(){var n,a,s="class",i=t.fm,o=i.res(s,"disabled"),l=i.res(s,"active"),r=i.res(s,"hover"),d="elfinder-button-menu-item",c=e('<span class="elfinder-button-text">'+t.title+"</span>"),u=t.className?t.className:t.name,f=e(this).addClass("ui-state-default elfinder-button").attr("title",t.title).append('<span class="elfinder-button-icon elfinder-button-icon-'+u+'"/>',c).on("mouseenter mouseleave",function(e){!f.hasClass(o)&&f["mouseleave"==e.type?"removeClass":"addClass"](r)}).on("click",function(e){f.hasClass(o)||(n&&t.variants.length>=1?(n.is(":hidden")&&i.getUI().click(),e.stopPropagation(),n.css(v()).slideToggle({duration:100,done:function(e){i[n.is(":visible")?"toFront":"toHide"](n)}})):i.exec(t.name,h(),{_userAction:!0,_currentType:"toolbar",_currentNode:f}))}),m=function(){i.toHide(n)},v=function(){var e=i.getUI(),t=e.offset(),n=f.offset();return{top:n.top-t.top,left:n.left-t.left,maxHeight:e.height()-40}},h=function(){var e=i.selected();return e.length||(e=i.cwd()?[i.cwd().hash]:void 0),e};c.hide(),t.button=f,Array.isArray(t.variants)&&(f.addClass("elfinder-menubutton"),n=e('<div class="ui-front ui-widget ui-widget-content elfinder-button-menu elfinder-button-'+u+'-menu ui-corner-all"/>').hide().appendTo(i.getUI()).on("mouseenter mouseleave","."+d,function(){e(this).toggleClass(r)}).on("click","."+d,function(a){var s=e(this).data("value");a.preventDefault(),a.stopPropagation(),f.removeClass(r),i.toHide(n),void 0===s&&(s={}),"object"==typeof s&&(s._userAction=!0),i.exec(t.name,h(),s)}).on("close",m),i.bind("disable select",m).getUI().on("click",m),t.change(function(){n.html(""),e.each(t.variants,function(a,s){n.append(e('<div class="'+d+'">'+s[1]+"</div>").data("value",s[0]).addClass(s[0]==t.value?"elfinder-button-menu-item-selected":""))})})),t.change(function(){var e;a&&cancelAnimationFrame(a),a=requestAnimationFrame(function(){t.disabled()?f.removeClass(l+" "+r).addClass(o):(f.removeClass(o),f[t.active()?"addClass":"removeClass"](l)),t.syncTitleOnChange&&(e=t.className?t.className:t.name,u!==e&&(f.children(".elfinder-button-icon").removeClass("elfinder-button-icon-"+u).addClass("elfinder-button-icon-"+e),n&&n.removeClass("elfinder-button-"+u+"-menu").addClass("elfinder-button-"+e+"-menu"),u=e),c.html(t.title),f.attr("title",t.title))})}).change()})}});
//# sourceMappingURL=../sourcemaps/ui/button.js.map
