/**
 * skylark-elfinder - A version of elfinder that ported to running on skylarkjs.
 * @author 
 * @version v0.9.0
 * @link 
 * @license MIT
 */
define(["skylark-jquery"],function(t){return t.fn.elfinderstat=function(e){"use strict";return this.each(function(){var i=t(this).addClass("elfinder-stat-size"),s=t('<div class="elfinder-stat-selected"/>').on("click","a",function(i){var s=t(this).data("hash");i.preventDefault(),e.exec("opendir",[s])}),a=e.i18n("items"),n=e.i18n("selected"),r=e.i18n("size"),c=function(t){i.find("span.elfinder-stat-incsearch").html(t?t.hashes.length+" / ":""),i.attr("title",i.text()),e.trigger("uistatchange")},h=function(i){var a,c,h=0,l=0,d=[];1===i.length?(c=i[0],h=c.size,2===e.searchStatus.state&&(a=e.escape(c.path?c.path.replace(/\/[^\/]*$/,""):".."),d.push('<a href="#elf_'+c.phash+'" data-hash="'+c.hash+'" title="'+a+'">'+a+"</a>")),d.push(e.escape(c.i18||c.name)),s.html(d.join("/")+(h>0?", "+e.formatSize(h):""))):i.length?(t.each(i,function(t,e){l++,h+=parseInt(e.size)||0}),s.html(l?n+": "+l+", "+r+": "+e.formatSize(h):"&nbsp;")):s.html(""),s.attr("title",s.text()),e.trigger("uistatchange")};e.getUI("statusbar").prepend(i).append(s).show(),e.UA.Mobile&&t.fn.tooltip&&e.getUI("statusbar").tooltip({classes:{"ui-tooltip":"elfinder-ui-tooltip ui-widget-shadow"},tooltipClass:"elfinder-ui-tooltip ui-widget-shadow",track:!0}),e.bind("cwdhasheschange",function(s){var n,r,c,h,l,d;n=t.map(s.data,function(t){return e.file(t)}),r=0,c=0,h=e.cwd(),l=!0,d=!0,(h.sizeInfo||h.size)&&(c=h.size,l=!1),t.each(n,function(t,e){r++,l&&(c+=parseInt(e.size)||0,!0!==d||"directory"!==e.mime||e.sizeInfo||(d=!1))}),i.html(a+': <span class="elfinder-stat-incsearch"></span>'+r+',&nbsp;<span class="elfinder-stat-size'+(d?" elfinder-stat-size-recursive":"")+'">'+e.i18n(d?"sum":"size")+": "+e.formatSize(c)+"</span>").attr("title",i.text()),e.trigger("uistatchange")}).change(function(s){var a=s.data.changed||[],n=e.cwd().hash;t.each(a,function(){if(this.hash===n)return this.size&&(i.children(".elfinder-stat-size").addClass("elfinder-stat-size-recursive").html(e.i18n("sum")+": "+e.formatSize(this.size)),i.attr("title",i.text())),!1})}).select(function(){h(e.selectedFiles())}).bind("open",function(){h([])}).bind("incsearch",function(t){c(t.data)}).bind("incsearchend",function(){c()})})},t});
//# sourceMappingURL=../sourcemaps/ui/stat.js.map
