/**
 * skylark-elfinder - A version of elfinder that ported to running on skylarkjs.
 * @author 
 * @version v0.9.0
 * @link 
 * @license MIT
 */
define(["./elFinder"],function(t){return t.prototype.command=function(t){"use strict";this.fm=t,this.name="",this.dialogClass="",this.className="",this.title="",this.linkedCmds=[],this.state=-1,this.alwaysEnabled=!1,this.noChangeDirOnRemovedCwd=!1,this._disabled=!1,this.disableOnSearch=!1,this.updateOnSelect=!0,this.syncTitleOnChange=!1,this.keepContextmenu=!1,this._handlers={enable:function(){this.update(void 0,this.value)},disable:function(){this.update(-1,this.value)},"open reload load sync":function(){this._disabled=!(this.alwaysEnabled||this.fm.isCommandEnabled(this.name)),this.update(void 0,this.value),this.change()}},this.handlers={},this.shortcuts=[],this.options={ui:"button"},this.listeners=[],this.setup=function(t,s){var i,e,n,h=this,a=this.fm,r=function(t){var s=t.callback||function(t){a.exec(h.name,void 0,{_userAction:!0,_currentType:"shortcut"})};t.callback=function(t){var i,e={};h.enabled()&&(a.searchStatus.state<2?i=a.isCommandEnabled(h.name):($.each(a.selected(),function(t,s){a.optionsByHashes[s]?e[s]=!0:$.each(a.volOptions,function(t){if(!e[t]&&0===s.indexOf(t))return e[t]=!0,!1})}),$.each(e,function(t){if(!(i=a.isCommandEnabled(h.name,t)))return!1})),i&&(h.event=t,s.call(h),delete h.event))}};for(this.name=t,this.title=a.messages["cmd"+t]?a.i18n("cmd"+t):this.extendsCmd&&a.messages["cmd"+this.extendsCmd]?a.i18n("cmd"+this.extendsCmd):t,this.options=Object.assign({},this.options,s),this.listeners=[],this.dialogClass="elfinder-dialog-"+t,s.shortcuts&&("function"==typeof s.shortcuts?n=s.shortcuts(this.fm,this.shortcuts):Array.isArray(s.shortcuts)&&(n=s.shortcuts),this.shortcuts=n||[]),this.updateOnSelect&&(this._handlers.select=function(){this.update(void 0,this.value)}),$.each(Object.assign({},h._handlers,h.handlers),function(t,s){a.bind(t,$.proxy(s,h))}),i=0;i<this.shortcuts.length;i++)r(e=this.shortcuts[i]),!e.description&&(e.description=this.title),a.shortcut(e);this.disableOnSearch&&a.bind("search searchend",function(){h._disabled="search"===this.type||!(this.alwaysEnabled||a.isCommandEnabled(t)),h.update(void 0,h.value)}),this.init()},this.init=function(){},this.exec=function(t,s){return $.Deferred().reject()},this.getUndo=function(t,s){return!1},this.disabled=function(){return this.state<0},this.enabled=function(){return this.state>-1},this.active=function(){return this.state>0},this.getstate=function(){return-1},this.update=function(t,s){var i=this.state,e=this.value;this._disabled&&0===this.fm.searchStatus?this.state=-1:this.state=void 0!==t?t:this.getstate(),this.value=s,i==this.state&&e==this.value||this.change()},this.change=function(t){var s,i;if("function"==typeof t)this.listeners.push(t);else for(i=0;i<this.listeners.length;i++){s=this.listeners[i];try{s(this.state,this.value)}catch(t){this.fm.debug("error",t)}}return this},this.hashes=function(s){return s?$.grep(Array.isArray(s)?s:[s],function(s){return!!t.file(s)}):t.selected()},this.files=function(t){var s=this.fm;return t?$.map(Array.isArray(t)?t:[t],function(t){return s.file(t)||null}):s.selectedFiles()},this.fmDialog=function(t,s){return s.cssClass?s.cssClass+=" "+this.dialogClass:s.cssClass=this.dialogClass,this.fm.dialog(t,s)}},t});
//# sourceMappingURL=sourcemaps/command.js.map
