/**
 * skylark-elfinder - A version of elfinder that ported to running on skylarkjs.
 * @author 
 * @version v0.9.0
 * @link 
 * @license MIT
 */
define(["../elFinder"],function(e){return e.prototype.commands.sort=function(){"use strict";var e=this,t=e.fm,s=function(){e.variants=[],$.each(t.sortRules,function(s,r){if(t.sorters[s]){var i=s===t.sortType?"asc"===t.sortOrder?"n":"s":"";e.variants.push([s,(i?'<span class="ui-icon ui-icon-arrowthick-1-'+i+'"></span>':"")+"&nbsp;"+t.i18n("sort"+s)])}}),e.variants.push("|"),e.variants.push(["stick",(t.sortStickFolders?'<span class="ui-icon ui-icon-check"/>':"")+"&nbsp;"+t.i18n("sortFoldersFirst")]),t.ui.tree&&null!==t.options.sortAlsoTreeview&&(e.variants.push("|"),e.variants.push(["tree",(t.sortAlsoTreeview?'<span class="ui-icon ui-icon-check"/>':"")+"&nbsp;"+t.i18n("sortAlsoTreeview")])),r()},r=function(){var e,s=t.getUI("contextmenu");s.is(":visible")&&((e=s.find("span.elfinder-button-icon-sort").siblings("div.elfinder-contextmenu-sub")).find("span.ui-icon").remove(),e.children("div.elfinder-contextsubmenu-item").each(function(){var e,s=$(this).children("span"),r=s.text().trim();r===(i.stick||(i.stick=t.i18n("sortFoldersFirst")))?t.sortStickFolders&&s.prepend('<span class="ui-icon ui-icon-check"/>'):r===(i.tree||(i.tree=t.i18n("sortAlsoTreeview")))?t.sortAlsoTreeview&&s.prepend('<span class="ui-icon ui-icon-check"/>'):r===(i[t.sortType]||(i[t.sortType]=t.i18n("sort"+t.sortType)))&&(e="asc"===t.sortOrder?"n":"s",s.prepend('<span class="ui-icon ui-icon-arrowthick-1-'+e+'"></span>'))}))},i={};this.options={ui:"sortbutton"},this.keepContextmenu=!0,t.bind("sortchange",s).bind("sorterupdate",function(){s(),t.getUI().children(".elfinder-button-sort-menu").children(".elfinder-button-menu-item").each(function(){var e=$(this),s=e.attr("rel");e.toggle(!(s&&!t.sorters[s]))})}).bind("cwdrender",function(){var e=$(t.cwd).find("div.elfinder-cwd-wrapper-list table");e.length&&$.each(t.sortRules,function(s,r){var i=e.find("thead tr td.elfinder-cwd-view-th-"+s);if(i.length){var n,o=s==t.sortType,c={type:s,order:o?"asc"==t.sortOrder?"desc":"asc":t.sortOrder};o&&(i.addClass("ui-state-active"),n="asc"==t.sortOrder?"n":"s",$('<span class="ui-icon ui-icon-triangle-1-'+n+'"/>').appendTo(i)),$(i).on("click",function(e){$(this).data("dragging")||(e.stopPropagation(),t.getUI("cwd").data("longtap")||t.exec("sort",[],c))}).on("mouseenter mouseleave",function(e){$(this).toggleClass("ui-state-hover","mouseenter"===e.type)})}})}),this.getstate=function(){return 0},this.exec=function(e,t){var s,r=this.fm,i=$.isPlainObject(t)?t:(s={},"stick"==(t+="")?s.stick=!r.sortStickFolders:"tree"===t?s.tree=!r.sortAlsoTreeview:r.sorters[t]&&(r.sortType===t?s.order="asc"===r.sortOrder?"desc":"asc":s.type=t),s),n=Object.assign({type:r.sortType,order:r.sortOrder,stick:r.sortStickFolders,tree:r.sortAlsoTreeview},i);return r.lazy(function(){r.setSort(n.type,n.order,n.stick,n.tree),this.resolve()})}},e});
//# sourceMappingURL=../sourcemaps/commands/sort.js.map
