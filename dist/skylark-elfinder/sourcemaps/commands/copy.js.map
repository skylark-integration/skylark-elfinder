{"version":3,"sources":["commands/copy.js"],"names":["define","elFinder","prototype","commands","copy","this","shortcuts","pattern","getstate","select","sel","files","cnt","length","$","grep","f","read","exec","hashes","fm","dfrd","Deferred","fail","error","each","i","file","reject","name","state","resolve","clipboard"],"mappings":";;;;;;;AAAAA,QACC,eACC,SAASC,GAiCV,OA/BAA,EAASC,UAAUC,SAASC,KAAO,WAClC,aACAC,KAAKC,YACJC,QAAc,uBAGfF,KAAKG,SAAW,SAASC,GACxB,IAAIC,EAAML,KAAKM,MAAMF,GACpBG,EAAMF,EAAIG,OAEX,OAAOD,GAAOE,EAAEC,KAAKL,EAAK,SAASM,GAAK,QAAOA,EAAEC,OAAwBJ,QAAUD,EAAM,GAAK,GAG/FP,KAAKa,KAAO,SAASC,GACpB,IAAIC,EAAOf,KAAKe,GACfC,EAAOP,EAAEQ,WACPC,KAAK,SAASC,GACdJ,EAAGI,MAAMA,KASZ,OANAV,EAAEW,KAAKpB,KAAKM,MAAMQ,GAAS,SAASO,EAAGC,GACtC,IAAMA,EAAKV,KACV,OAAQI,EAAKO,QAAQ,UAAWD,EAAKE,KAAM,cAItB,YAAhBR,EAAKS,QAAwBT,EAAOA,EAAKU,QAAQX,EAAGY,UAAU3B,KAAKc,OAAOA,OAK5ElB","file":"../../commands/copy.js","sourcesContent":["define([\n\t\"../elFinder\"\n],function(elFinder){\n\n\telFinder.prototype.commands.copy = function() {\n\t\t\"use strict\";\n\t\tthis.shortcuts = [{\n\t\t\tpattern     : 'ctrl+c ctrl+insert'\n\t\t}];\n\t\t\n\t\tthis.getstate = function(select) {\n\t\t\tvar sel = this.files(select),\n\t\t\t\tcnt = sel.length;\n\n\t\t\treturn cnt && $.grep(sel, function(f) { return f.read ? true : false; }).length == cnt ? 0 : -1;\n\t\t};\n\t\t\n\t\tthis.exec = function(hashes) {\n\t\t\tvar fm   = this.fm,\n\t\t\t\tdfrd = $.Deferred()\n\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\tfm.error(error);\n\t\t\t\t\t});\n\n\t\t\t$.each(this.files(hashes), function(i, file) {\n\t\t\t\tif (! file.read) {\n\t\t\t\t\treturn !dfrd.reject(['errCopy', file.name, 'errPerm']);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\treturn dfrd.state() == 'rejected' ? dfrd : dfrd.resolve(fm.clipboard(this.hashes(hashes)));\n\t\t};\n\n\t};\n\n\treturn elFinder;\n\n});"]}