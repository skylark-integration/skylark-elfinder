{"version":3,"sources":["commands/mkdir.js"],"names":["define","elFinder","prototype","commands","mkdir","curOrg","fm","this","self","value","disableOnSearch","updateOnSelect","syncTitleOnChange","mime","prefix","exec","select","cOpts","onCwd","length","_currentType","origin","data","target","cwd","hash","options","intoNewFolderToolbtn","getUI","trigger","move","i18n","$","proxy","res","shortcuts","pattern","init","bind","e","sel","selected","targets","className","type","title","update","requestAnimationFrame","getstate","files","cnt","write","read","grep","f","locked"],"mappings":";;;;;;;AAAAA,QACC,eACC,SAASC,GAuFV,OAhFAA,EAASC,UAAUC,SAASC,MAAQ,WACnC,aACA,IAECC,EAFGC,EAAOC,KAAKD,GACfE,EAAOD,KAGRA,KAAKE,MAAkB,GACvBF,KAAKG,iBAAkB,EACvBH,KAAKI,gBAAkB,EACvBJ,KAAKK,mBAAoB,EACzBL,KAAKM,KAAkB,YACvBN,KAAKO,OAAkB,kBACvBP,KAAKQ,KAAkB,SAASC,EAAQC,GACvC,IAAIC,EAiBJ,OAfIF,GAAUA,EAAOG,QAAUF,GAASA,EAAMG,cAAuC,WAAvBH,EAAMG,cACnEb,KAAKc,OAASJ,EAAMG,aACpBb,KAAKe,MACJC,OAAQP,EAAO,MAGhBE,EAAQZ,EAAGkB,MAAMC,OAAST,EAAO,GACjCT,KAAKc,OAAShB,IAAWa,EAAOb,EAAS,aAClCE,KAAKe,MAEPN,GAAYT,KAAKmB,QAAQC,sBAC9BrB,EAAGsB,MAAM,OAAOC,QAAQ,eAGzBtB,KAAKuB,KAAOvB,KAAKE,QAAUH,EAAGyB,KAAK,cAC5BC,EAAEC,MAAM3B,EAAG4B,IAAI,QAAS,QAAS1B,EAAjCwB,IAGRzB,KAAK4B,YACJC,QAAc,iBAGf7B,KAAK8B,KAAO,WACP9B,KAAKmB,QAAQC,uBAChBpB,KAAKK,mBAAoB,IAI3BN,EAAGgC,KAAK,4CAA6C,SAASC,GAC7D,IAAIC,GAAOD,EAAEjB,KAAOiB,EAAEjB,KAAKmB,UAAYF,EAAEjB,KAAKoB,QAAW,OAASpC,EAAGmC,WAErEjC,EAAKmC,UAAY,QACjBtC,EAASkC,EAAEjB,MAAQkB,EAAIrB,SAASoB,EAAEjB,KAAKD,QAAUkB,EAAEjB,KAAKsB,OAAc,GACjEpC,EAAKkB,QAAQC,sBAAmC,KAAXtB,IACzCA,EAAS,OAENmC,EAAIrB,QAAqB,WAAXd,GAAkC,QAAXA,GAAoBC,EAAGkB,MAAMC,OAASe,EAAI,IAClFhC,EAAKqC,MAAQvC,EAAGyB,KAAK,cACrBvB,EAAKmC,WAAa,iCAElBnC,EAAKqC,MAAQvC,EAAGyB,KAAK,YAEP,qBAAXQ,EAAEK,KACLpC,EAAKsC,YAAO,EAAStC,EAAKqC,OAE1BE,sBAAsB,WACrBvC,EAAKsC,YAAO,EAAStC,EAAKqC,WAK7BtC,KAAKyC,SAAW,SAAShC,GACxB,IAAIQ,EAAMlB,EAAGkB,MACZgB,EAAkB,WAAXnC,GAAwBW,GAAUA,EAAO,KAAOQ,EAAIC,KAAQlB,KAAK0C,MAAMjC,GAAUV,EAAGmC,eAC3FS,EAAMV,EAAIrB,OAEX,MAAe,WAAXd,EACI6C,GAAOV,EAAI,GAAGW,OAASX,EAAI,GAAGY,KAAM,GAAK,GAEzC5B,EAAI2B,OAAWD,GAAOlB,EAAEqB,KAAKb,EAAK,SAASc,GAAK,SAAOA,EAAEF,MAAUE,EAAEC,UAAyBpC,QAAU+B,GAAW,EAAL,IAMjHjD","file":"../../commands/mkdir.js","sourcesContent":["define([\n\t\"../elFinder\"\n],function(elFinder){\n\t/**\n\t * @class  elFinder command \"mkdir\"\n\t * Create new folder\n\t *\n\t * @author Dmitry (dio) Levashov\n\t **/\n\telFinder.prototype.commands.mkdir = function() {\n\t\t\"use strict\";\n\t\tvar fm   = this.fm,\n\t\t\tself = this,\n\t\t\tcurOrg;\n\t\t\n\t\tthis.value           = '';\n\t\tthis.disableOnSearch = true;\n\t\tthis.updateOnSelect  = false;\n\t\tthis.syncTitleOnChange = true;\n\t\tthis.mime            = 'directory';\n\t\tthis.prefix          = 'untitled folder';\n\t\tthis.exec            = function(select, cOpts) {\n\t\t\tvar onCwd;\n\n\t\t\tif (select && select.length && cOpts && cOpts._currentType && cOpts._currentType === 'navbar') {\n\t\t\t\tthis.origin = cOpts._currentType;\n\t\t\t\tthis.data = {\n\t\t\t\t\ttarget: select[0]\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tonCwd = fm.cwd().hash === select[0];\n\t\t\t\tthis.origin = curOrg && !onCwd? curOrg : 'cwd';\n\t\t\t\tdelete this.data;\n\t\t\t}\n\t\t\tif (! select && ! this.options.intoNewFolderToolbtn) {\n\t\t\t\tfm.getUI('cwd').trigger('unselectall');\n\t\t\t}\n\t\t\t//this.move = (!onCwd && curOrg !== 'navbar' && fm.selected().length)? true : false;\n\t\t\tthis.move = this.value === fm.i18n('cmdmkdirin');\n\t\t\treturn $.proxy(fm.res('mixin', 'make'), self)();\n\t\t};\n\t\t\n\t\tthis.shortcuts = [{\n\t\t\tpattern     : 'ctrl+shift+n'\n\t\t}];\n\n\t\tthis.init = function() {\n\t\t\tif (this.options.intoNewFolderToolbtn) {\n\t\t\t\tthis.syncTitleOnChange = true;\n\t\t\t}\n\t\t};\n\t\t\n\t\tfm.bind('select contextmenucreate closecontextmenu', function(e) {\n\t\t\tvar sel = (e.data? (e.data.selected || e.data.targets) : null) || fm.selected();\n\t\t\t\n\t\t\tself.className = 'mkdir';\n\t\t\tcurOrg = e.data && sel.length? (e.data.origin || e.data.type || '') : '';\n\t\t\tif (!self.options.intoNewFolderToolbtn && curOrg === '') {\n\t\t\t\tcurOrg = 'cwd';\n\t\t\t}\n\t\t\tif (sel.length && curOrg !== 'navbar' && curOrg !== 'cwd' && fm.cwd().hash !== sel[0]) {\n\t\t\t\tself.title = fm.i18n('cmdmkdirin');\n\t\t\t\tself.className += ' elfinder-button-icon-mkdirin';\n\t\t\t} else {\n\t\t\t\tself.title = fm.i18n('cmdmkdir');\n\t\t\t}\n\t\t\tif (e.type !== 'closecontextmenu') {\n\t\t\t\tself.update(void(0), self.title);\n\t\t\t} else {\n\t\t\t\trequestAnimationFrame(function() {\n\t\t\t\t\tself.update(void(0), self.title);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.getstate = function(select) {\n\t\t\tvar cwd = fm.cwd(),\n\t\t\t\tsel = (curOrg === 'navbar' || (select && select[0] !== cwd.hash))? this.files(select || fm.selected()) : [],\n\t\t\t\tcnt = sel.length;\n\n\t\t\tif (curOrg === 'navbar') {\n\t\t\t\treturn cnt && sel[0].write && sel[0].read? 0 : -1;  \n\t\t\t} else {\n\t\t\t\treturn cwd.write && (!cnt || $.grep(sel, function(f) { return f.read && ! f.locked? true : false; }).length == cnt)? 0 : -1;\n\t\t\t}\n\t\t};\n\n\t};\n\n\treturn elFinder;\n\n});"]}