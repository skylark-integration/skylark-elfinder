{"version":3,"sources":["jquery.elfinder.js"],"names":["define","$","ui","ddmanager","origin","prepareOffsets","t","event","isOutView","elem","is","rect","getBoundingClientRect","document","elementFromPoint","left","top","width","height","type","options","elfRefresh","i","d","m","droppables","scope","l","length","autoDisable","disabled","element","undefined","ajaxTransport","originalOptions","jqXHR","callback","window","FormData","dataType","data","ArrayBuffer","Blob","send","headers","complete","responseType","xhr","open","url","async","username","password","xhrFields","mimeType","overrideMimeType","crossDomain","setRequestHeader","onload","onerror","onabort","ontimeout","abort","status","statusText","response","getAllResponseHeaders","e","support","touch","touchHandled","posX","posY","mouseProto","mouse","prototype","_mouseInit","_mouseDestroy","_touchStart","this","_mouseCapture","originalEvent","changedTouches","screenX","toFixed","screenY","_touchMoved","simulateMouseEvent","_touchMove","x","y","Math","abs","_touchEnd","hasClass","on","touchstart","proxy","touchmove","touchend","call","off","simulatedType","touches","currentTarget","preventDefault","simulatedEvent","createEvent","initMouseEvent","clientX","clientY","target","dispatchEvent","fn","elfinder","o","o2","getElFinder","each","opts","cmd","bootCallback","hide","show","destroy","extend","isPlainObject","reloadCallback","isFunction","elFinder","instance","elfUiWidgetInstance","name","widgetFullName","scrollRight","val","node","get","max","scrollWidth","scrollLeft","clientWidth","scrollBottom","scrollHeight","scrollTop","clientHeight"],"mappings":"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","file":"../jquery.elfinder.js","sourcesContent":["define([\n\t\"skylark-jquery\"\n],function($) {\t/*** jQuery UI droppable performance tune for elFinder ***/\n\t(function(){\n\tif ($.ui) {\n\t\tif ($.ui.ddmanager) {\n\t\t\tvar origin = $.ui.ddmanager.prepareOffsets;\n\t\t\t$.ui.ddmanager.prepareOffsets = function( t, event ) {\n\t\t\t\tvar isOutView = function(elem) {\n\t\t\t\t\tif (elem.is(':hidden')) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tvar rect = elem[0].getBoundingClientRect();\n\t\t\t\t\treturn document.elementFromPoint(rect.left, rect.top) || document.elementFromPoint(rect.left + rect.width, rect.top + rect.height)? false : true;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif (event.type === 'mousedown' || t.options.elfRefresh) {\n\t\t\t\t\tvar i, d,\n\t\t\t\t\tm = $.ui.ddmanager.droppables[ t.options.scope ] || [],\n\t\t\t\t\tl = m.length;\n\t\t\t\t\tfor ( i = 0; i < l; i++ ) {\n\t\t\t\t\t\td = m[ i ];\n\t\t\t\t\t\tif (d.options.autoDisable && (!d.options.disabled || d.options.autoDisable > 1)) {\n\t\t\t\t\t\t\td.options.disabled = isOutView(d.element);\n\t\t\t\t\t\t\td.options.autoDisable = d.options.disabled? 2 : 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// call origin function\n\t\t\t\treturn origin( t, event );\n\t\t\t};\n\t\t}\n\t}\n\t})();\n\n\t /**\n\t *\n\t * jquery.binarytransport\n\t *\n\t * @description. jQuery ajax transport for making binary data type requests.\n\t *\n\t */\n\n\t(function($, undefined) {\n\t\t\"use strict\";\n\n\t\t// use this transport for \"binary\" data type\n\t\t$.ajaxTransport(\"+binary\", function(options, originalOptions, jqXHR) {\n\t\t\t// check for conditions and support for blob / arraybuffer response type\n\t\t\tif (window.FormData && ((options.dataType && (options.dataType == 'binary')) || (options.data && ((window.ArrayBuffer && options.data instanceof ArrayBuffer) || (window.Blob && options.data instanceof Blob))))) {\n\t\t\t\tvar callback;\n\n\t\t\t\t// Cross domain only allowed if supported through XMLHttpRequest\n\t\t\t\treturn {\n\t\t\t\t\tsend: function( headers, complete ) {\n\t\t\t\t\t\tvar i,\n\t\t\t\t\t\t\tdataType = options.responseType || \"blob\",\n\t\t\t\t\t\t\txhr = options.xhr();\n\n\t\t\t\t\t\txhr.open(\n\t\t\t\t\t\t\toptions.type,\n\t\t\t\t\t\t\toptions.url,\n\t\t\t\t\t\t\toptions.async,\n\t\t\t\t\t\t\toptions.username,\n\t\t\t\t\t\t\toptions.password\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Apply custom fields if provided\n\t\t\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Override mime type if needed\n\t\t\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// X-Requested-With header\n\t\t\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set headers\n\t\t\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Callback\n\t\t\t\t\t\tcallback = function( type ) {\n\t\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\t\tcallback = xhr.onload = xhr.onerror = xhr.onabort = xhr.ontimeout = null;\n\n\t\t\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\t\t\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tvar data = {};\n\t\t\t\t\t\t\t\t\t\tdata[options.dataType] = xhr.response;\n\t\t\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\t\txhr.statusText,\n\t\t\t\t\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Listen to events\n\t\t\t\t\t\txhr.onload = callback();\n\t\t\t\t\t\txhr.onabort = xhr.onerror = xhr.ontimeout = callback( \"error\" );\n\n\t\t\t\t\t\t// Create the abort callback\n\t\t\t\t\t\tcallback = callback( \"abort\" );\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\txhr.responseType = dataType;\n\t\t\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\t\t\txhr.send( options.data || null );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\tthrow e;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\tabort: function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t})($);\n\n\t/*!\n\t * jQuery UI Touch Punch 0.2.3\n\t *\n\t * Copyright 2011–2014, Dave Furfero\n\t * Dual licensed under the MIT or GPL Version 2 licenses.\n\t *\n\t * Depends:\n\t *\tjquery.ui.widget.js\n\t *\tjquery.ui.mouse.js\n\t */\n\t(function ($) {\n\n\t  // Detect touch support\n\t  $.support.touch = 'ontouchend' in document;\n\n\t  // Ignore browsers without touch support\n\t  if (!$.support.touch) {\n\t\treturn;\n\t  }\n\n\t  var mouseProto = $.ui.mouse.prototype,\n\t\t  _mouseInit = mouseProto._mouseInit,\n\t\t  _mouseDestroy = mouseProto._mouseDestroy,\n\t\t  touchHandled,\n\t\t  posX, posY;\n\n\t  /**\n\t   * Simulate a mouse event based on a corresponding touch event\n\t   * @param {Object} event A touch event\n\t   * @param {String} simulatedType The corresponding mouse event\n\t   */\n\t  function simulateMouseEvent (event, simulatedType) {\n\n\t\t// Ignore multi-touch events\n\t\tif (event.originalEvent.touches.length > 1) {\n\t\t  return;\n\t\t}\n\n\t\tif (! $(event.currentTarget).hasClass('touch-punch-keep-default')) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tvar touch = event.originalEvent.changedTouches[0],\n\t\t\tsimulatedEvent = document.createEvent('MouseEvents');\n\t\t\n\t\t// Initialize the simulated mouse event using the touch event's coordinates\n\t\tsimulatedEvent.initMouseEvent(\n\t\t  simulatedType,\t// type\n\t\t  true,\t\t\t\t// bubbles\t\t\t\t\t  \n\t\t  true,\t\t\t\t// cancelable\t\t\t\t  \n\t\t  window,\t\t\t// view\t\t\t\t\t\t  \n\t\t  1,\t\t\t\t// detail\t\t\t\t\t  \n\t\t  touch.screenX,\t// screenX\t\t\t\t\t  \n\t\t  touch.screenY,\t// screenY\t\t\t\t\t  \n\t\t  touch.clientX,\t// clientX\t\t\t\t\t  \n\t\t  touch.clientY,\t// clientY\t\t\t\t\t  \n\t\t  false,\t\t\t// ctrlKey\t\t\t\t\t  \n\t\t  false,\t\t\t// altKey\t\t\t\t\t  \n\t\t  false,\t\t\t// shiftKey\t\t\t\t\t  \n\t\t  false,\t\t\t// metaKey\t\t\t\t\t  \n\t\t  0,\t\t\t\t// button\t\t\t\t\t  \n\t\t  null\t\t\t\t// relatedTarget\t\t\t  \n\t\t);\n\n\t\t// Dispatch the simulated event to the target element\n\t\tevent.target.dispatchEvent(simulatedEvent);\n\t  }\n\n\t  /**\n\t   * Handle the jQuery UI widget's touchstart events\n\t   * @param {Object} event The widget element's touchstart event\n\t   */\n\t  mouseProto._touchStart = function (event) {\n\n\t\tvar self = this;\n\n\t\t// Ignore the event if another widget is already being handled\n\t\tif (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {\n\t\t  return;\n\t\t}\n\n\t\t// Track element position to avoid \"false\" move\n\t\tposX = event.originalEvent.changedTouches[0].screenX.toFixed(0);\n\t\tposY = event.originalEvent.changedTouches[0].screenY.toFixed(0);\n\n\t\t// Set the flag to prevent other widgets from inheriting the touch event\n\t\ttouchHandled = true;\n\n\t\t// Track movement to determine if interaction was a click\n\t\tself._touchMoved = false;\n\n\t\t// Simulate the mouseover event\n\t\tsimulateMouseEvent(event, 'mouseover');\n\n\t\t// Simulate the mousemove event\n\t\tsimulateMouseEvent(event, 'mousemove');\n\n\t\t// Simulate the mousedown event\n\t\tsimulateMouseEvent(event, 'mousedown');\n\t  };\n\n\t  /**\n\t   * Handle the jQuery UI widget's touchmove events\n\t   * @param {Object} event The document's touchmove event\n\t   */\n\t  mouseProto._touchMove = function (event) {\n\n\t\t// Ignore event if not handled\n\t\tif (!touchHandled) {\n\t\t  return;\n\t\t}\n\n\t\t// Ignore if it's a \"false\" move (position not changed)\n\t\tvar x = event.originalEvent.changedTouches[0].screenX.toFixed(0);\n\t\tvar y = event.originalEvent.changedTouches[0].screenY.toFixed(0);\n\t\t// Ignore if it's a \"false\" move (position not changed)\n\t\tif (Math.abs(posX - x) <= 4 && Math.abs(posY - y) <= 4) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Interaction was not a click\n\t\tthis._touchMoved = true;\n\n\t\t// Simulate the mousemove event\n\t\tsimulateMouseEvent(event, 'mousemove');\n\t  };\n\n\t  /**\n\t   * Handle the jQuery UI widget's touchend events\n\t   * @param {Object} event The document's touchend event\n\t   */\n\t  mouseProto._touchEnd = function (event) {\n\n\t\t// Ignore event if not handled\n\t\tif (!touchHandled) {\n\t\t  return;\n\t\t}\n\n\t\t// Simulate the mouseup event\n\t\tsimulateMouseEvent(event, 'mouseup');\n\n\t\t// Simulate the mouseout event\n\t\tsimulateMouseEvent(event, 'mouseout');\n\n\t\t// If the touch interaction did not move, it should trigger a click\n\t\tif (!this._touchMoved) {\n\n\t\t  // Simulate the click event\n\t\t  simulateMouseEvent(event, 'click');\n\t\t}\n\n\t\t// Unset the flag to allow other widgets to inherit the touch event\n\t\ttouchHandled = false;\n\t\tthis._touchMoved = false;\n\t  };\n\n\t  /**\n\t   * A duck punch of the $.ui.mouse _mouseInit method to support touch events.\n\t   * This method extends the widget with bound touch event handlers that\n\t   * translate touch events to mouse events and pass them to the widget's\n\t   * original mouse event handling methods.\n\t   */\n\t  mouseProto._mouseInit = function () {\n\t\t\n\t\tvar self = this;\n\n\t\tif (self.element.hasClass('touch-punch')) {\n\t\t\t// Delegate the touch handlers to the widget's element\n\t\t\tself.element.on({\n\t\t\t  touchstart: $.proxy(self, '_touchStart'),\n\t\t\t  touchmove: $.proxy(self, '_touchMove'),\n\t\t\t  touchend: $.proxy(self, '_touchEnd')\n\t\t\t});\n\t\t}\n\n\t\t// Call the original $.ui.mouse init method\n\t\t_mouseInit.call(self);\n\t  };\n\n\t  /**\n\t   * Remove the touch event handlers\n\t   */\n\t  mouseProto._mouseDestroy = function () {\n\t\t\n\t\tvar self = this;\n\n\t\tif (self.element.hasClass('touch-punch')) {\n\t\t\t// Delegate the touch handlers to the widget's element\n\t\t\tself.element.off({\n\t\t\t  touchstart: $.proxy(self, '_touchStart'),\n\t\t\t  touchmove: $.proxy(self, '_touchMove'),\n\t\t\t  touchend: $.proxy(self, '_touchEnd')\n\t\t\t});\n\t\t}\n\n\t\t// Call the original $.ui.mouse destroy method\n\t\t_mouseDestroy.call(self);\n\t  };\n\n\t})($);\n\n\t$.fn.elfinder = function(o, o2) {\n\t\t\n\t\tif (o === 'instance') {\n\t\t\treturn this.getElFinder();\n\t\t} else if (o === 'ondemand') {\n\n\t\t}\n\t\t\n\t\treturn this.each(function() {\n\t\t\t\n\t\t\tvar cmd          = typeof o  === 'string'  ? o  : '',\n\t\t\t\tbootCallback = typeof o2 === 'function'? o2 : void(0),\n\t\t\t\telfinder     = this.elfinder,\n\t\t\t\topts, reloadCallback;\n\t\t\t\n\t\t\tif (!elfinder) {\n\t\t\t\tif ($.isPlainObject(o)) {\n\t\t\t\t\tnew elFinder(this, o, bootCallback);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tswitch(cmd) {\n\t\t\t\t\tcase 'close':\n\t\t\t\t\tcase 'hide':\n\t\t\t\t\t\telfinder.hide();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\tcase 'open':\n\t\t\t\t\tcase 'show':\n\t\t\t\t\t\telfinder.show();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\n\t\t\t\t\tcase 'destroy':\n\t\t\t\t\t\telfinder.destroy();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase 'reload':\n\t\t\t\t\tcase 'restart':\n\t\t\t\t\t\tif (elfinder) {\n\t\t\t\t\t\t\topts = $.extend(true, elfinder.options, $.isPlainObject(o2)? o2 : {});\n\t\t\t\t\t\t\tbootCallback = elfinder.bootCallback;\n\t\t\t\t\t\t\tif (elfinder.reloadCallback && $.isFunction(elfinder.reloadCallback)) {\n\t\t\t\t\t\t\t\telfinder.reloadCallback(opts, bootCallback);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telfinder.destroy();\n\t\t\t\t\t\t\t\tnew elFinder(this, opts, bootCallback);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\t$.fn.getElFinder = function() {\n\t\tvar instance;\n\t\t\n\t\tthis.each(function() {\n\t\t\tif (this.elfinder) {\n\t\t\t\tinstance = this.elfinder;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn instance;\n\t};\n\n\t$.fn.elfUiWidgetInstance = function(name) {\n\t\ttry {\n\t\t\treturn this[name]('instance');\n\t\t} catch(e) {\n\t\t\t// fallback for jQuery UI < 1.11\n\t\t\tvar data = this.data('ui-' + name);\n\t\t\tif (data && typeof data === 'object' && data.widgetFullName === 'ui-' + name) {\n\t\t\t\treturn data;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n\n\t// function scrollRight\n\tif (! $.fn.scrollRight) {\n\t\t$.fn.extend({\n\t\t\tscrollRight: function (val) {\n\t\t\t\tvar node = this.get(0);\n\t\t\t\tif (val === undefined) {\n\t\t\t\t\treturn Math.max(0, node.scrollWidth - (node.scrollLeft + node.clientWidth));\n\t\t\t\t}\n\t\t\t\treturn this.scrollLeft(node.scrollWidth - node.clientWidth - val);\n\t\t\t}\n\t\t});\n\t}\n\n\t// function scrollBottom\n\tif (! $.fn.scrollBottom) {\n\t\t$.fn.extend({\n\t\t\tscrollBottom: function(val) { \n\t\t\t\tvar node = this.get(0);\n\t\t\t\tif (val === undefined) {\n\t\t\t\t\treturn Math.max(0, node.scrollHeight - (node.scrollTop + node.clientHeight));\n\t\t\t\t}\n\t\t\t\treturn this.scrollTop(node.scrollHeight - node.clientHeight - val);\n\t\t\t}\n\t\t});\n\t}\n\n});"]}