{"version":3,"sources":["resources.js"],"names":["define","elFinder","prototype","resources","class","hover","active","disabled","draggable","droppable","adroppable","cwdfile","cwd","tree","treeroot","navdir","navdirwrap","navarrow","navsubtree","navcollapse","navexpand","treedir","placedir","searchbtn","editing","preventback","tabstab","tabsactive","tpl","perms","lock","symlink","navicon","navspinner","mimes","text","mixin","make","colwidth","nnode","pnode","nextAction","dst","dstCls","collapsed","expanded","arrow","subtree","self","this","fm","cmd","name","req","requestCmd","wz","getUI","org","origin","find","tarea","storage","sel","selected","move","empty","hasClass","unselect","requestAnimationFrame","input","trigger","rest","overlay","is","elfinderoverlay","off","cancel","removeClass","css","namespace","parent","dfrd","$","Deferred","fail","error","attr","addClass","files","clipboard","always","cleanup","enable","unbind","openCallback","id","parseInt","Math","random","phash","data","target","file","hash","date","Date","uniqueName","prefix","mime","read","write","getHours","getMinutes","node","length","hide","unselectfiles","resize","closest","remove","e","inError","reject","stopPropagation","preventDefault","on","style","height","scrollHeight","width","scrollWidth","stopImmediatePropagation","keyCode","ui","ESCAPE","ENTER","type","cut","trim","val","valid","options","validName","test","modal","close","setTimeout","select","fileByName","exec","when","done","toast","nextAct","before","lockfiles","request","Object","assign","notify","cnt","preventFail","syncOnFail","navigate","unlockfiles","show","prev","Array","isArray","inArray","added","tmpMimes","item","dirhash","acts","directory","msg","default","one","mimeIsText","mimesCanMakeEmpty","mimeTypes","unshift","split","incwd","i18n","action","inbuffer","resolve","splitFileExtention","UA","Mobile","iOS","enabled","setSelectionRange","blink","state","isCommandEnabled","isPlainObject","res","children","contents","filter","nodeType","navHash2Id","replaceWith","append","bind","elm","mode","func","slowonce","delay","fadeIn","fadeOut","lookme","stop"],"mappings":"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","file":"../resources.js","sourcesContent":["define([\n\t\"./elFinder\"\n],function(elFinder) {\n\t/**\n\t * elFinder resources registry.\n\t * Store shared data\n\t *\n\t * @type Object\n\t * @author Dmitry (dio) Levashov\n\t **/\n\telFinder.prototype.resources = {\n\t\t'class' : {\n\t\t\thover       : 'ui-state-hover',\n\t\t\tactive      : 'ui-state-active',\n\t\t\tdisabled    : 'ui-state-disabled',\n\t\t\tdraggable   : 'ui-draggable',\n\t\t\tdroppable   : 'ui-droppable',\n\t\t\tadroppable  : 'elfinder-droppable-active',\n\t\t\tcwdfile     : 'elfinder-cwd-file',\n\t\t\tcwd         : 'elfinder-cwd',\n\t\t\ttree        : 'elfinder-tree',\n\t\t\ttreeroot    : 'elfinder-navbar-root',\n\t\t\tnavdir      : 'elfinder-navbar-dir',\n\t\t\tnavdirwrap  : 'elfinder-navbar-dir-wrapper',\n\t\t\tnavarrow    : 'elfinder-navbar-arrow',\n\t\t\tnavsubtree  : 'elfinder-navbar-subtree',\n\t\t\tnavcollapse : 'elfinder-navbar-collapsed',\n\t\t\tnavexpand   : 'elfinder-navbar-expanded',\n\t\t\ttreedir     : 'elfinder-tree-dir',\n\t\t\tplacedir    : 'elfinder-place-dir',\n\t\t\tsearchbtn   : 'elfinder-button-search',\n\t\t\tediting     : 'elfinder-to-editing',\n\t\t\tpreventback : 'elfinder-prevent-back',\n\t\t\ttabstab     : 'ui-state-default ui-tabs-tab ui-corner-top ui-tab',\n\t\t\ttabsactive  : 'ui-tabs-active ui-state-active'\n\t\t},\n\t\ttpl : {\n\t\t\tperms      : '<span class=\"elfinder-perms\"/>',\n\t\t\tlock       : '<span class=\"elfinder-lock\"/>',\n\t\t\tsymlink    : '<span class=\"elfinder-symlink\"/>',\n\t\t\tnavicon    : '<span class=\"elfinder-nav-icon\"/>',\n\t\t\tnavspinner : '<span class=\"elfinder-spinner elfinder-navbar-spinner\"/>',\n\t\t\tnavdir     : '<div class=\"elfinder-navbar-wrapper{root}\"><span id=\"{id}\" class=\"ui-corner-all elfinder-navbar-dir {cssclass}\"{title}><span class=\"elfinder-navbar-arrow\"/><span class=\"elfinder-navbar-icon\" {style}/>{symlink}{permissions}{name}</span><div class=\"elfinder-navbar-subtree\" style=\"display:none\"/></div>',\n\t\t\tplacedir   : '<div class=\"elfinder-navbar-wrapper\"><span id=\"{id}\" class=\"ui-corner-all elfinder-navbar-dir {cssclass}\"{title}><span class=\"elfinder-navbar-arrow\"/><span class=\"elfinder-navbar-icon\" {style}/>{symlink}{permissions}{name}</span><div class=\"elfinder-navbar-subtree\" style=\"display:none\"/></div>'\n\t\t\t\n\t\t},\n\t\t// mimes.text will be overwritten with connector config if `textMimes` is included in initial response\n\t\t// @see php/elFInder.class.php `public static $textMimes`\n\t\tmimes : {\n\t\t\ttext : [\n\t\t\t\t'application/dash+xml',\n\t\t\t\t'application/docbook+xml',\n\t\t\t\t'application/javascript',\n\t\t\t\t'application/json',\n\t\t\t\t'application/plt',\n\t\t\t\t'application/sat',\n\t\t\t\t'application/sql',\n\t\t\t\t'application/step',\n\t\t\t\t'application/vnd.hp-hpgl',\n\t\t\t\t'application/x-awk',\n\t\t\t\t'application/x-config',\n\t\t\t\t'application/x-csh',\n\t\t\t\t'application/x-empty',\n\t\t\t\t'application/x-mpegurl',\n\t\t\t\t'application/x-perl',\n\t\t\t\t'application/x-php',\n\t\t\t\t'application/x-web-config',\n\t\t\t\t'application/xhtml+xml',\n\t\t\t\t'application/xml',\n\t\t\t\t'audio/x-mp3-playlist',\n\t\t\t\t'image/cgm',\n\t\t\t\t'image/svg+xml',\n\t\t\t\t'image/vnd.dxf',\n\t\t\t\t'model/iges'\n\t\t\t]\n\t\t},\n\t\t\n\t\tmixin : {\n\t\t\tmake : function() {\n\t\t\t\t\"use strict\";\n\t\t\t\tvar self = this,\n\t\t\t\t\tfm   = this.fm,\n\t\t\t\t\tcmd  = this.name,\n\t\t\t\t\treq  = this.requestCmd || cmd,\n\t\t\t\t\twz   = fm.getUI('workzone'),\n\t\t\t\t\torg  = (this.origin && this.origin === 'navbar')? 'tree' : 'cwd',\n\t\t\t\t\ttree = (org === 'tree'),\n\t\t\t\t\tfind = tree? 'navHash2Elm' : 'cwdHash2Elm',\n\t\t\t\t\ttarea= (! tree && fm.storage('view') != 'list'),\n\t\t\t\t\tsel  = fm.selected(),\n\t\t\t\t\tmove = this.move || false,\n\t\t\t\t\tempty= wz.hasClass('elfinder-cwd-wrapper-empty'),\n\t\t\t\t\tunselect = function() {\n\t\t\t\t\t\trequestAnimationFrame(function() {\n\t\t\t\t\t\t\tinput && input.trigger('blur');\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\trest = function(){\n\t\t\t\t\t\tif (!overlay.is(':hidden')) {\n\t\t\t\t\t\t\toverlay.elfinderoverlay('hide').off('click close', cancel);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (nnode) {\n\t\t\t\t\t\t\tpnode.removeClass('ui-front')\n\t\t\t\t\t\t\t\t.css('position', '')\n\t\t\t\t\t\t\t\t.off('unselect.'+fm.namespace, unselect);\n\t\t\t\t\t\t\tif (tarea) {\n\t\t\t\t\t\t\t\tnnode && nnode.css('max-height', '');\n\t\t\t\t\t\t\t} else if (!tree) {\n\t\t\t\t\t\t\t\tpnode.css('width', '')\n\t\t\t\t\t\t\t\t\t.parent('td').css('overflow', '');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, colwidth,\n\t\t\t\t\tdfrd = $.Deferred()\n\t\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\t\tdstCls && dst.attr('class', dstCls);\n\t\t\t\t\t\t\tempty && wz.addClass('elfinder-cwd-wrapper-empty');\n\t\t\t\t\t\t\tif (sel) {\n\t\t\t\t\t\t\t\tmove && fm.trigger('unlockfiles', {files: sel});\n\t\t\t\t\t\t\t\tfm.clipboard([]);\n\t\t\t\t\t\t\t\tfm.trigger('selectfiles', { files: sel });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\terror && fm.error(error);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.always(function() {\n\t\t\t\t\t\t\trest();\n\t\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\t\tfm.enable().unbind('open', openCallback).trigger('resMixinMake');\n\t\t\t\t\t\t}),\n\t\t\t\t\tid    = 'tmp_'+parseInt(Math.random()*100000),\n\t\t\t\t\tphash = this.data && this.data.target? this.data.target : (tree? fm.file(sel[0]).hash : fm.cwd().hash),\n\t\t\t\t\tdate = new Date(),\n\t\t\t\t\tfile   = {\n\t\t\t\t\t\thash  : id,\n\t\t\t\t\t\tphash : phash,\n\t\t\t\t\t\tname  : fm.uniqueName(this.prefix, phash),\n\t\t\t\t\t\tmime  : this.mime,\n\t\t\t\t\t\tread  : true,\n\t\t\t\t\t\twrite : true,\n\t\t\t\t\t\tdate  : 'Today '+date.getHours()+':'+date.getMinutes(),\n\t\t\t\t\t\tmove  : move\n\t\t\t\t\t},\n\t\t\t\t\tdum = fm.getUI(org).trigger('create.'+fm.namespace, file),\n\t\t\t\t\tdata = this.data || {},\n\t\t\t\t\tnode = fm[find](id),\n\t\t\t\t\tnnode, pnode,\n\t\t\t\t\toverlay = fm.getUI('overlay'),\n\t\t\t\t\tcleanup = function() {\n\t\t\t\t\t\tif (node && node.length) {\n\t\t\t\t\t\t\tinput.off();\n\t\t\t\t\t\t\tnode.hide();\n\t\t\t\t\t\t\tfm.unselectfiles({files : [id]}).unbind('resize', resize);\n\t\t\t\t\t\t\trequestAnimationFrame(function() {\n\t\t\t\t\t\t\t\tif (tree) {\n\t\t\t\t\t\t\t\t\tnode.closest('.elfinder-navbar-wrapper').remove();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnode.remove();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tcancel = function(e) { \n\t\t\t\t\t\tif (!overlay.is(':hidden')) {\n\t\t\t\t\t\t\tpnode.css('z-index', '');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (! inError) {\n\t\t\t\t\t\t\tcleanup();\n\t\t\t\t\t\t\tdfrd.reject();\n\t\t\t\t\t\t\tif (e) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tinput = $(tarea? '<textarea/>' : '<input type=\"text\"/>')\n\t\t\t\t\t\t.on('keyup text', function(){\n\t\t\t\t\t\t\tif (tarea) {\n\t\t\t\t\t\t\t\tthis.style.height = '1px';\n\t\t\t\t\t\t\t\tthis.style.height = this.scrollHeight + 'px';\n\t\t\t\t\t\t\t} else if (colwidth) {\n\t\t\t\t\t\t\t\tthis.style.width = colwidth + 'px';\n\t\t\t\t\t\t\t\tif (this.scrollWidth > colwidth) {\n\t\t\t\t\t\t\t\t\tthis.style.width = this.scrollWidth + 10 + 'px';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.on('keydown', function(e) {\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\tif (e.keyCode == $.ui.keyCode.ESCAPE) {\n\t\t\t\t\t\t\t\tdfrd.reject();\n\t\t\t\t\t\t\t} else if (e.keyCode == $.ui.keyCode.ENTER) {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\tinput.trigger('blur');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.on('mousedown click dblclick', function(e) {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tif (e.type === 'dblclick') {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.on('blur', function() {\n\t\t\t\t\t\t\tvar name   = $.trim(input.val()),\n\t\t\t\t\t\t\t\tparent = input.parent(),\n\t\t\t\t\t\t\t\tvalid  = true,\n\t\t\t\t\t\t\t\tcut;\n\n\t\t\t\t\t\t\tif (!overlay.is(':hidden')) {\n\t\t\t\t\t\t\t\tpnode.css('z-index', '');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (name === '') {\n\t\t\t\t\t\t\t\treturn cancel();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!inError && parent.length) {\n\n\t\t\t\t\t\t\t\tif (fm.options.validName && fm.options.validName.test) {\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tvalid = fm.options.validName.test(name);\n\t\t\t\t\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!name || name === '.' || name === '..' || !valid) {\n\t\t\t\t\t\t\t\t\tinError = true;\n\t\t\t\t\t\t\t\t\tfm.error(file.mime === 'directory'? 'errInvDirname' : 'errInvName', {modal: true, close: function(){setTimeout(select, 120);}});\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (fm.fileByName(name, phash)) {\n\t\t\t\t\t\t\t\t\tinError = true;\n\t\t\t\t\t\t\t\t\tfm.error(['errExists', name], {modal: true, close: function(){setTimeout(select, 120);}});\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tcut = (sel && move)? fm.exec('cut', sel) : null;\n\n\t\t\t\t\t\t\t\t$.when(cut)\n\t\t\t\t\t\t\t\t.done(function() {\n\t\t\t\t\t\t\t\t\tvar toast   = {},\n\t\t\t\t\t\t\t\t\t\tnextAct = {};\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\trest();\n\t\t\t\t\t\t\t\t\tinput.hide().before($('<span>').text(name));\n\n\t\t\t\t\t\t\t\t\tfm.lockfiles({files : [id]});\n\n\t\t\t\t\t\t\t\t\tfm.request({\n\t\t\t\t\t\t\t\t\t\t\tdata        : Object.assign({cmd : req, name : name, target : phash}, data || {}), \n\t\t\t\t\t\t\t\t\t\t\tnotify      : {type : req, cnt : 1},\n\t\t\t\t\t\t\t\t\t\t\tpreventFail : true,\n\t\t\t\t\t\t\t\t\t\t\tsyncOnFail  : true,\n\t\t\t\t\t\t\t\t\t\t\tnavigate    : {toast : toast},\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.fail(function(error) {\n\t\t\t\t\t\t\t\t\t\t\tfm.unlockfiles({files : [id]});\n\t\t\t\t\t\t\t\t\t\t\tinError = true;\n\t\t\t\t\t\t\t\t\t\t\tinput.show().prev().remove();\n\t\t\t\t\t\t\t\t\t\t\tfm.error(error, {\n\t\t\t\t\t\t\t\t\t\t\t\tmodal: true,\n\t\t\t\t\t\t\t\t\t\t\t\tclose: function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (Array.isArray(error) && $.inArray('errUploadMime', error) !== -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdfrd.notify('errUploadMime').reject();\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(select, 120);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.done(function(data) {\n\t\t\t\t\t\t\t\t\t\t\tif (data && data.added && data.added[0]) {\n\t\t\t\t\t\t\t\t\t\t\t\tvar item    = data.added[0],\n\t\t\t\t\t\t\t\t\t\t\t\t\tdirhash = item.hash,\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewItem = fm[find](dirhash),\n\t\t\t\t\t\t\t\t\t\t\t\t\tacts    = {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'directory' : { cmd: 'open', msg: 'cmdopendir' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'text'      : { cmd: 'edit', msg: 'cmdedit' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'default'   : { cmd: 'open', msg: 'cmdopen' }\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\ttmpMimes;\n\t\t\t\t\t\t\t\t\t\t\t\tif (sel && move) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tfm.one(req+'done', function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfm.exec('paste', dirhash);\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tif (!move) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (fm.mimeIsText(item.mime) && !fm.mimesCanMakeEmpty[item.mime] && fm.mimeTypes[item.mime]) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfm.trigger('canMakeEmptyFile', {mimes: [item.mime], unshift: true});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttmpMimes = {};\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttmpMimes[item.mime] = fm.mimeTypes[item.mime];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfm.storage('mkfileTextMimes', Object.assign(tmpMimes, fm.storage('mkfileTextMimes') || {}));\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tObject.assign(nextAct, nextAction || acts[item.mime] || acts[item.mime.split('/')[0]] || acts[(fm.mimesCanMakeEmpty[item.mime] || $.inArray(item.mime, fm.resources.mimes.text) !== -1) ? 'text' : 'none'] || acts['default']);\n\t\t\t\t\t\t\t\t\t\t\t\t\tObject.assign(toast, nextAct.cmd ? {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tincwd    : {msg: fm.i18n(['complete', fm.i18n('cmd'+cmd)]), action: nextAct},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinbuffer : {msg: fm.i18n(['complete', fm.i18n('cmd'+cmd)]), action: nextAct}\n\t\t\t\t\t\t\t\t\t\t\t\t\t} : {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinbuffer : {msg: fm.i18n(['complete', fm.i18n('cmd'+cmd)])}\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdfrd.resolve(data);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.fail(function() {\n\t\t\t\t\t\t\t\t\tdfrd.reject();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.on('dragenter dragleave dragover drop', function(e) {\n\t\t\t\t\t\t\t// stop bubbling to prevent upload with native drop event\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t}),\n\t\t\t\t\tselect = function() {\n\t\t\t\t\t\tvar name = fm.splitFileExtention(input.val())[0];\n\t\t\t\t\t\tif (!inError && fm.UA.Mobile && !fm.UA.iOS) { // since iOS has a bug? (z-index not effect) so disable it\n\t\t\t\t\t\t\toverlay.on('click close', cancel).elfinderoverlay('show');\n\t\t\t\t\t\t\tpnode.css('z-index', overlay.css('z-index') + 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinError = false;\n\t\t\t\t\t\t! fm.enabled() && fm.enable();\n\t\t\t\t\t\tinput.trigger('focus').trigger('select');\n\t\t\t\t\t\tinput[0].setSelectionRange && input[0].setSelectionRange(0, name.length);\n\t\t\t\t\t},\n\t\t\t\t\tresize = function() {\n\t\t\t\t\t\tnode.trigger('scrolltoview', {blink : false});\n\t\t\t\t\t},\n\t\t\t\t\topenCallback = function() {\n\t\t\t\t\t\tdfrd && (dfrd.state() === 'pending') && dfrd.reject();\n\t\t\t\t\t},\n\t\t\t\t\tinError = false,\n\t\t\t\t\tnextAction,\n\t\t\t\t\t// for tree\n\t\t\t\t\tdst, dstCls, collapsed, expanded, arrow, subtree;\n\n\t\t\t\tif (!fm.isCommandEnabled(req, phash) || !node.length) {\n\t\t\t\t\treturn dfrd.reject();\n\t\t\t\t}\n\n\t\t\t\tif ($.isPlainObject(self.nextAction)){\n\t\t\t\t\tnextAction = Object.assign({}, self.nextAction);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (tree) {\n\t\t\t\t\tdst = fm[find](phash);\n\t\t\t\t\tcollapsed = fm.res('class', 'navcollapse');\n\t\t\t\t\texpanded  = fm.res('class', 'navexpand');\n\t\t\t\t\tarrow = fm.res('class', 'navarrow');\n\t\t\t\t\tsubtree = fm.res('class', 'navsubtree');\n\t\t\t\t\t\n\t\t\t\t\tnode.closest('.'+subtree).show();\n\t\t\t\t\tif (! dst.hasClass(collapsed)) {\n\t\t\t\t\t\tdstCls = dst.attr('class');\n\t\t\t\t\t\tdst.addClass(collapsed+' '+expanded+' elfinder-subtree-loaded');\n\t\t\t\t\t}\n\t\t\t\t\tif (dst.is('.'+collapsed+':not(.'+expanded+')')) {\n\t\t\t\t\t\tdst.children('.'+arrow).trigger('click').data('dfrd').done(function() {\n\t\t\t\t\t\t\tif (input.val() === file.name) {\n\t\t\t\t\t\t\t\tinput.val(fm.uniqueName(self.prefix, phash)).trigger('select').trigger('focus');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tnnode = node.contents().filter(function(){ return this.nodeType==3 && $(this).parent().attr('id') === fm.navHash2Id(file.hash); });\n\t\t\t\t\tpnode = nnode.parent();\n\t\t\t\t\tnnode.replaceWith(input.val(file.name));\n\t\t\t\t} else {\n\t\t\t\t\tempty && wz.removeClass('elfinder-cwd-wrapper-empty');\n\t\t\t\t\tnnode = node.find('.elfinder-cwd-filename');\n\t\t\t\t\tpnode = nnode.parent();\n\t\t\t\t\tif (tarea) {\n\t\t\t\t\t\tnnode.css('max-height', 'none');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolwidth = pnode.width();\n\t\t\t\t\t\tpnode.width(colwidth - 15)\n\t\t\t\t\t\t\t.parent('td').css('overflow', 'visible');\n\t\t\t\t\t}\n\t\t\t\t\tnnode.empty().append(input.val(file.name));\n\t\t\t\t}\n\t\t\t\tpnode.addClass('ui-front')\n\t\t\t\t\t.css('position', 'relative')\n\t\t\t\t\t.on('unselect.'+fm.namespace, unselect);\n\t\t\t\t\n\t\t\t\tfm.bind('resize', resize).one('open', openCallback);\n\t\t\t\t\n\t\t\t\tinput.trigger('keyup');\n\t\t\t\tselect();\n\n\t\t\t\treturn dfrd;\n\n\t\t\t}\n\t\t},\n\t\tblink: function(elm, mode) {\n\t\t\t\"use strict\";\n\t\t\tvar acts = {\n\t\t\t\tslowonce : function(){elm.hide().delay(250).fadeIn(750).delay(500).fadeOut(3500);},\n\t\t\t\tlookme   : function(){elm.show().fadeOut(500).fadeIn(750);}\n\t\t\t}, func;\n\t\t\tmode = mode || 'slowonce';\n\t\t\t\n\t\t\tfunc = acts[mode] || acts['lookme'];\n\t\t\t\n\t\t\telm.stop(true, true);\n\t\t\tfunc();\n\t\t}\n\t};\n\n\treturn elFinder;\n});\n"]}