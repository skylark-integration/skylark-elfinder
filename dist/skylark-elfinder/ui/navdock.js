/**
 * skylark-elfinder - A version of elfinder that ported to running on skylarkjs.
 * @author 
 * @version v0.9.0
 * @link 
 * @license MIT
 */
define(["skylark-jquery"],function(e){e.fn.elfindernavdock=function(i,t){"use strict";return this.not(".elfinder-navdock").each(function(){var n,a,r=e(this).hide().addClass("ui-state-default elfinder-navdock touch-punch"),h=(r.parent().children(".elfinder-workzone").append(r),function(t,n){var a,h=t-(n||r.height()),s=Object.keys(o).length,d=s?h/s:0;h&&(a=r.css("overflow"),r.css("overflow","hidden"),r.height(t),e.each(o,function(e,t){t.height(t.height()+d).trigger("resize."+i.namespace)}),i.trigger("wzresize"),r.css("overflow",a))}),s=e('<div class="ui-front ui-resizable-handle ui-resizable-n"/>').appendTo(r),o={},d=(parseInt(t.initMaxHeight)||50)/100,c=(parseInt(t.maxHeight)||90)/100;r.data("addNode",function(e,t){var g,l,u=i.getUI("workzone").height(),v=u*d;return t=Object.assign({first:!1,sizeSync:!0,init:!1},t),e.attr("id")||e.attr("id",i.namespace+"-navdock-"+ +new Date),t.sizeSync&&(o[e.attr("id")]=e),g=r.height()+e.outerHeight(!0),t.first?s.after(e):r.append(e),a=!0,r.resizable("enable").height(g).show(),i.trigger("wzresize"),t.init&&(l=i.storage("navdockHeight"),n=g=l||(g>v?v:g)),h(Math.min(g,u*c)),r}).data("removeNode",function(t,n){var h=e("#"+t);return delete o[t],r.height(r.height()-e("#"+t).outerHeight(!0)),n?"detach"===n?h=h.detach():n.append(h):h.remove(),r.children().length<=1&&(a=!1,r.resizable("disable").height(0).hide()),i.trigger("wzresize"),h}),t.disabled||i.one("init",function(){var e;i.getUI("navbar").children().not(".ui-resizable-handle").length&&(r.data("dockEnabled",!0),r.resizable({maxHeight:i.getUI("workzone").height()*c,handles:{n:s},start:function(t,n){e=r.css("overflow"),r.css("overflow","hidden"),i.trigger("navdockresizestart",{event:t,ui:n},!0)},resize:function(e,t){r.css("top",""),i.trigger("wzresize",{inNavdockResize:!0})},stop:function(t,a){i.trigger("navdockresizestop",{event:t,ui:a},!0),r.css("top",""),n=a.size.height,i.storage("navdockHeight",n),h(n,a.originalSize.height),r.css("overflow",e)}}),i.bind("wzresize",function(e){var t,a;r.is(":visible")&&(t=i.getUI("workzone").height()*c,e.data&&e.data.inNavdockResize||(a=r.height(),t<n?Math.abs(a-t)>1&&h(t):Math.abs(a-n)>1&&h(n)),r.resizable("option","maxHeight",t))}).bind("themechange",function(){var e=Math.round(r.height());requestAnimationFrame(function(){var i=Math.round(r.height()),t=e-i;0!==t&&h(r.height(),i-t)})})),i.bind("navbarshow navbarhide",function(e){r[a&&"navbarshow"===e.type?"show":"hide"]()})})}),this}});
//# sourceMappingURL=../sourcemaps/ui/navdock.js.map
