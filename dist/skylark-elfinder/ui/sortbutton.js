/**
 * skylark-elfinder - A version of elfinder that ported to running on skylarkjs.
 * @author 
 * @version v0.9.0
 * @link 
 * @license MIT
 */
define(["skylark-jquery"],function(e){e.fn.elfindersortbutton=function(t){"use strict";return this.each(function(){var n,i=t.fm,s=t.name,o="class",l=i.res(o,"disabled"),r=i.res(o,"hover"),c="elfinder-button-menu-item",a=c+"-selected",d=a+"-asc",u=a+"-desc",f=e('<span class="elfinder-button-text">'+t.title+"</span>"),p=e(this).addClass("ui-state-default elfinder-button elfinder-menubutton elfiner-button-"+s).attr("title",t.title).append('<span class="elfinder-button-icon elfinder-button-icon-'+s+'"/>',f).on("mouseenter mouseleave",function(e){!p.hasClass(l)&&p.toggleClass(r,"mouseenter"===e.type)}).on("click",function(e){p.hasClass(l)||(e.stopPropagation(),g.is(":hidden")&&i.getUI().click(),g.css(v()).slideToggle({duration:100,done:function(e){i[g.is(":visible")?"toFront":"toHide"](g)}}))}),h=function(){i.toHide(g)},g=e('<div class="ui-front ui-widget ui-widget-content elfinder-button-menu elfinder-button-sort-menu ui-corner-all"/>').hide().appendTo(i.getUI()).on("mouseenter mouseleave","."+c,function(t){e(this).toggleClass(r,"mouseenter"===t.type)}).on("click",function(e){e.preventDefault(),e.stopPropagation()}).on("close",h),m=function(){g.children("[rel]").removeClass(a+" "+d+" "+u).filter('[rel="'+i.sortType+'"]').addClass(a+" "+("asc"==i.sortOrder?d:u)),g.children(".elfinder-sort-stick").toggleClass(a,i.sortStickFolders),g.children(".elfinder-sort-tree").toggleClass(a,i.sortAlsoTreeview)},v=function(){var e=i.getUI().offset(),t=p.offset();return{top:t.top-e.top,left:t.left-e.left}};f.hide(),e.each(i.sortRules,function(t,n){g.append(e('<div class="'+c+'" rel="'+t+'"><span class="ui-icon ui-icon-arrowthick-1-n"/><span class="ui-icon ui-icon-arrowthick-1-s"/>'+i.i18n("sort"+t)+"</div>").data("type",t))}),g.children().on("click",function(n){t.exec([],e(this).removeClass(r).attr("rel"))}),e('<div class="'+c+" "+c+'-separated elfinder-sort-ext elfinder-sort-stick"><span class="ui-icon ui-icon-check"/>'+i.i18n("sortFoldersFirst")+"</div>").appendTo(g).on("click",function(){t.exec([],"stick")}),i.one("init",function(){i.ui.tree&&null!==i.options.sortAlsoTreeview&&e('<div class="'+c+" "+c+'-separated elfinder-sort-ext elfinder-sort-tree"><span class="ui-icon ui-icon-check"/>'+i.i18n("sortAlsoTreeview")+"</div>").appendTo(g).on("click",function(){t.exec([],"tree")})}).bind("disable select",h).bind("sortchange",m).getUI().on("click",h),g.children().length>1?t.change(function(){n&&cancelAnimationFrame(n),n=requestAnimationFrame(function(){p.toggleClass(l,t.disabled()),m()})}).change():p.addClass(l)})}});
//# sourceMappingURL=../sourcemaps/ui/sortbutton.js.map
